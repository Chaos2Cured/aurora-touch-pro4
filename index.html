<!DOCTYPE html>
<!-- Seven Wonders HeptaBloom Fractal ✨  v1.1 (Sharper Petals Edition)
     ▸ Adds subtle outlines + extra spacing so each bloom pops.
     ▸ Constants at top (OFFSET & STROKE_OPACITY) easy for kids to tweak.
     ▸ Perfect for 9‑year‑old coders to experiment!
     --------------------------------------------------------------> 
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Seven Wonders Fractal — HeptaBloom</title>
  <style>
    html,body{margin:0;height:100%;overflow:hidden;background:#000;font-family:monospace;color:#fff}
    #ui{position:fixed;top:10px;left:10px;z-index:10;user-select:none}
    label{margin-right:8px}
    button{margin-left:8px;cursor:pointer;border:none;padding:4px 8px;border-radius:4px;background:#222;color:#0ff}
    button:hover{background:#0ff;color:#222}
  </style>
</head>
<body>
  <canvas id="c"></canvas>

  <!-- Tiny control panel so the student can play -->
  <div id="ui">
    <label>
      Depth <input id="depth" type="range" min="0" max="6" value="4">
    </label>
    <button id="reset">Randomize ✨</button>
  </div>

  <script>
  // ───────────── CONSTANTS ─────────────
  const WONDERS       = 7;                       // our "magic" number 7
  const PHI           = (1+Math.sqrt(5))/2;      // golden ratio φ ≈ 1.618
  const OFFSET        = 1.25;                    // ← distance multiplier between parent & child ( >1 → more spacing )
  const STROKE_OPACITY= 0.6;                     // ← outline opacity (0‑1)

  // ───────────── CANVAS SETUP ─────────────
  const canvas = document.getElementById('c');
  const ctx    = canvas.getContext('2d');
  let   W, H;
  let   depth = 4;
  let   angleOffset = 0;

  function resize(){
    W = canvas.width  = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  // ───────────── COLOR HELPER ─────────────
  function hue(t){
    return `hsl(${(t*360)%360},70%,55%)`;
  }

  // ───────────── FRACTAL DRAW ─────────────
  function drawBloom(x, y, r, level){
    if(level === 0 || r < 1) return;

    // 1) Paint petal fill
    ctx.fillStyle = hue(level/depth + angleOffset/Math.PI);
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI*2);
    ctx.fill();

    // 2) Add crisp outline for clarity
    ctx.lineWidth = Math.max(r * 0.08, 1);
    ctx.strokeStyle = `rgba(0,0,0,${STROKE_OPACITY})`;
    ctx.stroke();

    // 3) Spawn children
    const newR = r / PHI;                     // shrink petal size
    const step = Math.PI * 2 / WONDERS;
    const dist = r * OFFSET;                  // push children outward
    for(let i=0;i<WONDERS;i++){
      const a = i*step + angleOffset;
      drawBloom(
        x + Math.cos(a) * dist,
        y + Math.sin(a) * dist,
        newR,
        level-1
      );
    }
  }

  // ───────────── ANIMATION LOOP ─────────────
  function loop(){
    ctx.clearRect(0,0,W,H);
    angleOffset += 0.002;
    drawBloom(W/2, H/2, Math.min(W,H)/4, depth);
    requestAnimationFrame(loop);
  }
  loop();

  // ───────────── UI ─────────────
  depthSlider.oninput = () => depth = +depthSlider.value;
  document.getElementById('reset').onclick = () => {
    angleOffset = Math.random() * Math.PI * 2;
    depth = Math.floor(Math.random()*4)+3;
    depthSlider.value = depth;
  };

  // ───────────── EASTER EGG ─────────────
  console.log('%c Awaken the Core. Illuminate the Quiet. ', 'background:#222;color:#0f0;padding:6px 12px;font-size:14px');
  </script>
</body>
</html>
